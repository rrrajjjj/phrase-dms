## How to use?

- Download logs [PHRASE Logs](https://drive.google.com/file/d/1RxJb83Hp5Ui5V2g8jBLnirfKJ3TOOPJK/view?usp=sharing), unzip into a directory called logs. Organise into the following directory structure - 

```
logs/
├── 1SP001/
├── 2SP001/
├── ...
src/
README.md
...

```

- Install dependencies from requirements.txt
- The webpage for the analysis can be generated by running src/analysis_webpage.py
- Use src/LogParser.py to parse logs - 
Here’s the Markdown documentation for your `LogParser` class


---

## Class: `LogParser`

### **Initialization**

```python
LogParser(log_path: str)
```

- **Description**: Initializes the `LogParser` with the path to the directory containing log files.
- **Arguments**:
  - `log_path` (str): Path to the logs directory.

---

### **Methods**

#### `parse_single_log`

```python
parse_single_log(path: str) -> Optional[dict]
```

- **Description**: Parses a single log file and returns its content as a dictionary.
- **Arguments**:
  - `path` (str): Path to the log file.
- **Returns**:
  - `dict`: Parsed log data if successful.
  - `None`: If parsing fails.

---

#### `get_patient_ids`

```python
get_patient_ids() -> List[str]
```

- **Description**: Retrieves a list of patient IDs. Each patient is represented by a directory, where the directory name is the patient ID.
- **Returns**:
  - `List[str]`: A list of patient IDs.

---

#### `get_session_paths`

```python
get_session_paths(patient_id: str) -> List[str]
```

- **Description**: Retrieves a list of session file paths for a given patient. Each session is represented by a JSON file.
- **Arguments**:
  - `patient_id` (str): The ID of the patient.
- **Returns**:
  - `List[str]`: A list of paths to session JSON files.

---

#### `get_played_protocols`

```python
get_played_protocols(patient_id: str) -> Dict[str, int]
```

- **Description**: Returns a dictionary mapping protocol names to the number of sessions played for each protocol.
- **Arguments**:
  - `patient_id` (str): The ID of the patient.
- **Returns**:
  - `Dict[str, int]`: A dictionary where keys are protocol names and values are the number of sessions.

---

#### `get_dms`

```python
get_dms(patient_id: str, protocol: Optional[str] = None) -> dict
```

- **Description**: Retrieves a dictionary of difficulty modulators (DMs) for a given protocol. If no protocol is specified, returns DMs for all protocols.
- **Arguments**:
  - `patient_id` (str): The ID of the patient.
  - `protocol` (Optional[str]): The name of the protocol. Defaults to `None`.
- **Returns**:
  - `dict`: A nested dictionary containing DMs for the specified protocol(s).

---

#### `get_hits_errors`

```python
get_hits_errors(patient_id: str, protocol: Optional[str] = None) -> dict
```

- **Description**: Retrieves a dictionary of hits and errors for a given protocol. If no protocol is specified, returns data for all protocols.
- **Arguments**:
  - `patient_id` (str): The ID of the patient.
  - `protocol` (Optional[str]): The name of the protocol. Defaults to `None`.
- **Returns**:
  - `dict`: A nested dictionary containing hits and errors for the specified protocol(s).

---

## Usage Example

```python
from log_parser import LogParser

# Initialize the LogParser
log_parser = LogParser(log_path="../logs")

# Get a list of patient IDs
patient_ids = log_parser.get_patient_ids()

# Get session paths for a specific patient
session_paths = log_parser.get_session_paths(patient_id="1SP001")

# Get the number of sessions played for each protocol
protocol_counts = log_parser.get_played_protocols(patient_id="1SP001")

# Get DMs for a specific protocol
dms = log_parser.get_dms(patient_id="1SP001", protocol="PianoSeq")

# Get hits and errors for a specific protocol
hits_errors = log_parser.get_hits_errors(patient_id="1SP001", protocol="PianoSeq")
```

---
